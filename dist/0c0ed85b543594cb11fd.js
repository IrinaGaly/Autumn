(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{124:function(e,t,r){},125:function(e,t,r){},126:function(e,t,r){},136:function(e,t,r){"use strict";var i=r(124);r.n(i).a},137:function(e,t,r){"use strict";var i=r(125);r.n(i).a},138:function(e,t,r){"use strict";var i=r(126);r.n(i).a},140:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return E}));var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reviews-componets"},[r("div",{staticClass:"page-content"},[r("div",{staticClass:"container"},[e._m(0),e._v(" "),!1===e.formIsShown?r("reviewForm",{attrs:{review:e.review},on:{submit:e.submitForm,close:function(t){e.formIsShown=!0}}}):e._e(),e._v(" "),r("ul",{staticClass:"reviews-list"},[r("li",{staticClass:"review-item"},[r("square-btn",{attrs:{type:"square",title:"Добавить отзыв"},on:{click:function(t){e.formIsShown=!1}}})],1),e._v(" "),e._l(e.reviews,(function(t){return r("li",{key:t.id,staticClass:"review-item"},[r("reviewCard",{attrs:{review:t},on:{"edit-review":function(r){return e.editReview(t)},"remove-review":function(r){return e.removeReview(t.id)}}})],1)}))],2)],1)])])};i._withStripped=!0;var n=r(0),s=r.n(n),o=r(2),a=r.n(o),c=r(8),v=r.n(c),l=r(10),u=r(74),w=r(75),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"review-card"},[r("div",{staticClass:"preview"},[r("img",{staticClass:"picture",attrs:{src:e.correctReview}}),e._v(" "),r("div",{staticClass:"preview-content"},[r("h4",{staticClass:"review-name"},[e._v(e._s(e.review.author))]),e._v(" "),r("p",{staticClass:"review-occ"},[e._v(e._s(e.review.occ))])])]),e._v(" "),r("div",{staticClass:"desc"},[r("p",{staticClass:"text"},[e._v(e._s(e.review.text))]),e._v(" "),r("div",{staticClass:"review-btn"},[r("icon",{staticClass:"pencil",attrs:{symbol:"pencil",title:"Править"},on:{click:e.handleEdit}}),e._v(" "),r("icon",{attrs:{symbol:"cross",title:"Удалить"},on:{click:e.handleRemove}})],1)])])};p._withStripped=!0;var d={components:{icon:r(32).default},props:{review:{type:Object}},methods:{handleRemove:function(){this.$emit("remove-review")},handleEdit:function(){this.$emit("edit-review",this.review)}},computed:{correctReview:function(){return"https://webdev-api.loftschool.com/".concat(this.review.photo)}}},f=(r(136),r(1)),h=Object(f.a)(d,p,[],!1,null,"1beb474a",null);h.options.__file="src/admin/components/review-card/review-card.vue";var m=h.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-reviews-compomnent"},[r("form",{staticClass:"form",attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[r("card",{staticClass:"edit-work",attrs:{title:"Новый отзыв"}},[r("div",{staticClass:"form-content",attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"info"},[r("div",{staticClass:"info-wrap"},[r("div",{staticClass:"review-col"},[r("div",{staticClass:"photo"}),e._v(" "),r("label",[r("div",{staticClass:"work-input"},[r("div",{staticClass:"btn-wrap"},[r("appButton",{attrs:{plain:"",typeAttr:"file",title:"Добавить фотографию"},on:{change:e.handleChange}})],1)])])]),e._v(" "),r("div",{staticClass:"review-container"},[r("app-input",{staticClass:"name-input",attrs:{title:"Имя автора"},model:{value:e.newReview.author,callback:function(t){e.$set(e.newReview,"author",t)},expression:"newReview.author"}}),e._v(" "),r("app-input",{staticClass:"occ-input",attrs:{title:"Титул автора"},model:{value:e.newReview.occ,callback:function(t){e.$set(e.newReview,"occ",t)},expression:"newReview.occ"}}),e._v(" "),r("app-input",{attrs:{title:"Отзыв",fieldType:"textarea"},model:{value:e.newReview.text,callback:function(t){e.$set(e.newReview,"text",t)},expression:"newReview.text"}})],1)]),e._v(" "),r("div",{staticClass:"add-info-btns"},[r("appButton",{attrs:{plain:"",title:"Отмена"},on:{click:function(t){return e.$emit("close")}}}),e._v(" "),r("appButton",{attrs:{typeAttr:"submit",title:"СОХРАНИТЬ"}})],1)])])])],1)])};b._withStripped=!0;r(46);var O=r(72),_=r(73),C=r(71),y=r(9);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g={components:{card:_.a,appButton:C.a,appInput:O.a,button:C.a},props:{review:{type:Object||null,default:null},shownForm:{type:Boolean}},data:function(){return{newReview:{author:"",occ:"",photo:{},text:""}}},methods:j(j({},Object(y.b)({addNewReview:"reviews/add",editReview:"review/edit"})),{},{handleSubmit:function(){var e=this;return a()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addNewReview(e.newReview);case 2:e.$emit("submit");case 3:case"end":return t.stop()}}),t)})))()}}),handleChange:function(e){e.preventDefault();var t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0];this.newReview.photo=t,this.renderPhoto(t),this.hovered=!1},renderPhoto:function(e){var t=this,r=new FileReader;r.readAsDataURL(e),r.onloadend=function(){t.newReview.preview=r.result},r.onerror=function(){t.showTooltip({text:error.response.data.error,type:"error"})},r.onabort=function(){t.showTooltip({text:error.response.data.error,type:"error"})}}},x=(r(137),Object(f.a)(g,b,[],!1,null,"ede31c54",null));x.options.__file="src/admin/components/reviewForm/review-form.vue";var P=x.exports;function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D={components:{iconedButton:l.a,category:u.a,reviewCard:m,tagsAdder:w.a,squareBtn:l.a,reviewForm:P},data:function(){return{formIsShown:!0,review:null}},computed:S({},Object(y.c)("reviews",{reviews:function(e){return e.data}})),methods:S(S({},Object(y.b)({fetchReviewAction:"reviews/fetch",removeReviewAction:"reviews/remove",editReviewAction:"reviews/edit"})),{},{removeReview:function(e){var t=this;return a()(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.removeReviewAction(e);case 2:case"end":return r.stop()}}),r)})))()},watch:{formIsShown:function(){this.formIsShown||(this.review=null)}}}),editReview:function(e){this.formIsShown=!0,this.review=e},created:function(){this.fetchReviewAction()}},$=(r(138),Object(f.a)(D,i,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("h1",{staticClass:"section-name"},[this._v("Блок «Отзывы»")])])}],!1,null,"2c7c3bd3",null));$.options.__file="src/admin/pages/reviews/reviews.vue";var E=$.exports}}]);